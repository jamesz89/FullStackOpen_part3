(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var c=t(16),o=t.n(c),a=t(5),u=t(7),r=t(3),i=t(2),s=t(4),b=t.n(s),j="https://hidden-escarpment-90431.herokuapp.com/api/persons",d=function(){return b.a.get(j).then((function(e){return e.data}))},h=function(e){return b.a.post(j,e).then((function(e){return e.data}))},l=function(e){var n="".concat(j,"/").concat(e);return b.a.delete(n).then((function(e){return e.data}))},m=function(e,n){var t="".concat(j,"/").concat(e);return b.a.put(t,n).then((function(e){return e.data}))},f=t(0),p=function(e){return Object(f.jsxs)("p",{children:[e.person.name," | ",e.person.number," ",Object(f.jsx)("button",{onClick:function(){return e.handleClick(e.person)},children:"Delete"})]})},O=function(e){return Object(f.jsxs)("div",{children:["Search:",Object(f.jsx)("input",{value:e.value,onChange:e.onChange})]})},v=function(e){return Object(f.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(f.jsxs)("div",{children:["Name:",Object(f.jsx)("input",{value:e.value.name,onChange:e.onChange,name:"name"})]}),Object(f.jsxs)("div",{children:["Number:",Object(f.jsx)("input",{value:e.value.number,onChange:e.onChange,name:"number"})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"Add or Update"})})]})},x=function(e){var n=e.message,t=e.type;return null===n?null:Object(f.jsx)("div",{className:t,children:n})},g=function(){var e=Object(i.useState)([]),n=Object(r.a)(e,2),t=n[0],c=n[1],o=Object(i.useState)({name:"",number:""}),s=Object(r.a)(o,2),b=s[0],j=s[1],g=Object(i.useState)(""),C=Object(r.a)(g,2),w=C[0],k=C[1],S=Object(i.useState)(null),y=Object(r.a)(S,2),N=y[0],E=y[1],L=Object(i.useState)(null),D=Object(r.a)(L,2),A=D[0],J=D[1];Object(i.useEffect)((function(){d().then((function(e){c(e)}))}),[]);var T=function(){var e={name:b.name,number:b.number};h(e).then((function(e){c(t.concat(e)),P("New contact added")})),j({name:"",number:""})},B=function(e){m(e,b).then((function(n){c(t.map((function(t){return t.id!==e?t:n}))),P("".concat(n.name,"'s phone number has been updated to ").concat(n.number))})).catch((function(e){U("Error: the person you want to update doesn't exist in the server")})),j({name:"",number:""})},I=function(e){window.confirm("Do you want to delete ".concat(e.name,"?"))&&l(e.id).then((function(){c(t.filter((function(n){return n.id!==e.id}))),P("".concat(e.name," has beed removed from the phonebook"))})).catch((function(e){U("Error: the person you want to delete doesn't exist in the server")}))},P=function(e){E(e),setTimeout((function(){E(null)}),5e3)},U=function(e){J(e),setTimeout((function(){J(null)}),5e3)};return Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Phonebook"}),Object(f.jsx)(x,{message:N,type:"success"}),Object(f.jsx)(x,{message:A,type:"error"}),Object(f.jsx)(O,{value:w,onChange:function(e){console.log(e.target.value),k(e.target.value)}}),Object(f.jsx)("h2",{children:"Add new"}),Object(f.jsx)(v,{onSubmit:function(e){e.preventDefault();var n=t.find((function(e){return b.name.toLowerCase()===e.name.toLowerCase()}));n?B(n.id):T()},value:b,onChange:function(e){var n=e.target,t=n.name,c=n.value;j(Object(u.a)(Object(u.a)({},b),{},Object(a.a)({},t,c)))}}),Object(f.jsx)("h2",{children:"Numbers"}),t.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())})).map((function(e){return Object(f.jsx)(p,{person:e,handleClick:I},e.name)}))]})};t(40);o.a.render(Object(f.jsx)(g,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.77f08e9f.chunk.js.map
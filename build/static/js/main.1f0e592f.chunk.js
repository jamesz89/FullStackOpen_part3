(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var c=t(16),a=t.n(c),o=t(5),r=t(7),u=t(3),i=t(2),s=t(4),b=t.n(s),j="/api/persons",l={getAll:function(){return b.a.get(j).then((function(e){return e.data}))},create:function(e){return b.a.post(j,e).then((function(e){return e.data}))},remove:function(e){var n="".concat(j,"/").concat(e);return b.a.delete(n).then((function(e){return e.data}))},update:function(e,n){var t="".concat(j,"/").concat(e);return b.a.put(t,n).then((function(e){return e.data}))}},d=t(0),m=function(e){return Object(d.jsxs)("p",{children:[e.person.name," | ",e.person.number," ",Object(d.jsx)("button",{onClick:function(){return e.handleClick(e.person)},children:"Delete"})]})},h=function(e){return Object(d.jsxs)("div",{children:["Search:",Object(d.jsx)("input",{value:e.value,onChange:e.onChange})]})},f=function(e){return Object(d.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(d.jsxs)("div",{children:["Name:",Object(d.jsx)("input",{value:e.value.name,onChange:e.onChange,name:"name"})]}),Object(d.jsxs)("div",{children:["Number:",Object(d.jsx)("input",{value:e.value.number,onChange:e.onChange,name:"number"})]}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{type:"submit",children:"Add or Update"})})]})},O=function(e){var n=e.message,t=e.type;return null===n?null:Object(d.jsx)("div",{className:t,children:n})},p=function(){var e=Object(i.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],a=Object(i.useState)({name:"",number:""}),s=Object(u.a)(a,2),b=s[0],j=s[1],p=Object(i.useState)(""),v=Object(u.a)(p,2),g=v[0],x=v[1],C=Object(i.useState)(null),w=Object(u.a)(C,2),k=w[0],S=w[1],y=Object(i.useState)(null),N=Object(u.a)(y,2),A=N[0],L=N[1];Object(i.useEffect)((function(){l.getAll().then((function(e){c(e)}))}),[]);var D=function(){var e={name:b.name,number:b.number};l.create(e).then((function(e){c(t.concat(e)),T("New contact added")})).catch((function(e){B(e.response.data.error.message)})),j({name:"",number:""})},E=function(e){l.update(e,b).then((function(n){c(t.map((function(t){return t.id!==e?t:n}))),T("".concat(n.name,"'s phone number has been updated to ").concat(n.number))})).catch((function(e){B(e.response.data.error.message)})),j({name:"",number:""})},J=function(e){window.confirm("Do you want to delete ".concat(e.name,"?"))&&l.remove(e.id).then((function(){c(t.filter((function(n){return n.id!==e.id}))),T("".concat(e.name," has beed removed from the phonebook"))})).catch((function(e){B(e.response.data.error.message)}))},T=function(e){S(e),setTimeout((function(){S(null)}),5e3)},B=function(e){L(e),setTimeout((function(){L(null)}),5e3)};return Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Phonebook"}),Object(d.jsx)(O,{message:k,type:"success"}),Object(d.jsx)(O,{message:A,type:"error"}),Object(d.jsx)(h,{value:g,onChange:function(e){console.log(e.target.value),x(e.target.value)}}),Object(d.jsx)("h2",{children:"Add new"}),Object(d.jsx)(f,{onSubmit:function(e){e.preventDefault();var n=t.find((function(e){return b.name.toLowerCase()===e.name.toLowerCase()}));n?E(n.id):D()},value:b,onChange:function(e){var n=e.target,t=n.name,c=n.value;j(Object(r.a)(Object(r.a)({},b),{},Object(o.a)({},t,c)))}}),Object(d.jsx)("h2",{children:"Numbers"}),t.filter((function(e){return e.name.toLowerCase().includes(g.toLowerCase())})).map((function(e){return Object(d.jsx)(m,{person:e,handleClick:J},e.name)}))]})};t(40);a.a.render(Object(d.jsx)(p,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.1f0e592f.chunk.js.map